# 指令系统

# 16bit: 8bit IR | 4bit PSW | 4bit CYC
作用：微控制器是一个ROM，这16bit是地址索引，存储单元是 32bit 的数据，是具体的控制信号。
连续的16个 32bit 的字构成了一段微程序（一般有效数据会少于16个）

格式：
| 指令 IR 8位 | 程序状态字 4位 | 微程序周期 4位 |

指令 8 位：需要负责指令，以及寻址方式。
寻址方式：
* 立即数寻址      MOV A, 5;       # 将 5 存入 A
* 寄存器寻址      MOV A, B;       # 将 B 的数据存入 A
* 直接寻址        MOV A, [5];     # 将 5 号内存的数据存入 A
* 寄存器间接寻址  MOV A, [B];     # 将 B 数值的内存地址内的数据存入 A
---
指令举例
- MOV A, B;
- ADD A, 5;
- NOT A:
- HLT
---
指令类别
* 二地址指令
  * 1xxx[aa][bb] 【其中，xxx是具体的指令类别，aa是目的寄存器，bb是源寄存器】
* 一地址指令
  * 01xxxx[aa]【其中，xxxx是具体的指令类别，aa是寻址方式】
* 零地址指令
  * 00xxxxxx


## 堆栈操作

《数据结构》栈 stack，也称 堆栈。
栈 - 后进先出
为存储栈，引入了段。

## 段

内存管理
- 段氏管理方式
- 页式管理方式


与 8086 的设计不同。
- 8086中，段与段内地址是有关的，
- 这里的段与段内地址是分开的。

段寄存器
- CS, Code Segment
- SS, Stack Segment
- DS, ES 暂时未使用

内存的管理
- 总的内存是 64K 的 8bit的区域
- 地址是：0000 ~ FFFF
- 00xx: 代码段，256Byte
- 01xx: 栈段，256Byte

汇编示例：
```
mov ss, 1   # 选择 SS 为 1，即 01xx 这个栈段
push A
push 15
```



