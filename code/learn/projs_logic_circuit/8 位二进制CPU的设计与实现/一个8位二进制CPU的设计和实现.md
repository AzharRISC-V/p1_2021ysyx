## Logical Circuit 软件

- 软件官网及介绍

  https://logiccircuit.org

  Version 2.21.01.10 released.
  14 January 2021

- 软件使用

  - 快捷键
    - 模拟开始：Ctrl + W
  - 技巧
    - 新增电路，修改电路 Name,Notation
    - Select Free Wires 选择没有连接的线。
    - 与门、非门等的封装（非常简单）
    - 连线时有折线，需要点击量词鼠标。
    - 连线交叉位置，先选中一条线，然后按住 Alt，点击焦点即可增加节点。

## 一个 8 位二进制 CPU 的设计和实现

1.  简介

    - B 站视频地址

      https://space.bilibili.com/491131440/channel/detail?cid=163546

      https://www.bilibili.com/video/BV1W5411p7Ax/?spm_id_from=autoNext

2.  演示 LED 电路，器件封装

3.  半加器

    - 真值表

    | A   | B   | S   | C   |
    | --- | --- | --- | --- |
    | 0   | 0   | 0   | 0   |
    | 0   | 1   | 1   | 0   |
    | 1   | 0   | 1   | 0   |
    | 1   | 1   | 0   | 1   |

    - 逻辑公式
      $$
       \begin{aligned}
       S =& \overline{A} B + A \overline{B} \\
       C =& AB
       \end{aligned}
      $$

4.  全加器

    - 多种实现方法
    - 利用查找表的方式
    - ROM (3 地址，2 数据)

5.  补码与减法

    - 1 位取反器

      - EN 控制是否取反，I 是输入，O 是输出

      - 真值表

      | EN  | I   | O   |
      | --- | --- | --- |
      | 0   | 0   | 0   |
      | 0   | 1   | 1   |
      | 1   | 0   | 1   |
      | 1   | 1   | 0   |

      - 其实就是异或门

    - 8 位取反器

       * 减法进位真值表
    
      | CI(进位输入 & 是否减法标志) | CO(进位输出) | O（实际输出） |
      | --------------------------- | ------------ | ------------- |
      | 0                           | 0            | 0             |
      | 0                           | 1            | 1             |
      | 1                           | 0            | 0             |
      | 1                           | 1            | 0             |

      含义：CI = 0，加法电路，此时，CO有效。CI=1，减法电路，此时，CO无效。

      公式：

      $$
      \begin{aligned}
        O = \overline{CI} ~ CO
        \end{aligned}
      $$

6.  七段十六进制数码管

    - Excel 中的转换公式

      = DEC2HEX(C2 _ 64 + D2 _ 32 + E2 _ 16 + F2 _ 8 + G2 _ 4 + H2 _ 2 + I2)

7.  七段十进制数码管

    - 继续用 ROM，将 8bit 输入，转换为 3x4bit 的输出

    - python 写一个生成 dec 到 hex 的脚本

      ```
      执行
      $ python -u "1.py"
      ```

    - 2 选 1 选择器

      | EN  | A   | B   | OUT |
      | --- | --- | --- | --- |
      | 0   |     | x   | A   |
      | 1   | x   |     | B   |

      $ OUT = \overline{EN}A + EN~B $

8.  R-S 触发器（Flip-Flop）

    - 构造：两个或非门，各自输出再接入另一个的输入端。

    - 真值表

      | Reset | Set | Q   | Q'  |
      | ----- | --- | --- | --- |
      | 0     | 0   | Q   | Q'  |
      | 0     | 1   | 1   | 0   |
      | 1     | 0   | 0   | 1   |
      | 1     | 1   | 0   | 0   |

    - 作用：当 Reset、Set 同时为 1 时，无效；同时为 0 时，保持上次状态；不同时可以设置或清除。

9.  D 触发器

    - 初衷：改进 R-S 触发器，不希望看到输出同时为 0 的无效状态，也就是确保 R/S 端不同。
    - 方法：输入：EN 和 D，输出：O。当 EN 为 0 时，O 为上次值；当 EN 为 1 时，O 为 D 的值。

10. D 边沿触发器：

    - 输入：D/CLK, 输出：O。
    - 上升沿版本：当 CLK 上升沿时，D 送给 O。平时没有变化
    - 设计初衷：上升沿送出数据，其余时间做其他准备工作。可能是为了时序同步。

    - R-S 触发器（改进版），增加了初始设定（CLR、PreSet），可以预设和清零。

11. T 触发器和行波计数器：

    - 跑马灯的例子，RESET 需要快速的置位一次。

12. 三态门和寄存器

    * D边沿触发器，制作字节存储器
    * 加上三态门，控制读写，得到寄存器

13. 
